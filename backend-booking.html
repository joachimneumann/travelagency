<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AsiaTravelPlan Booking</title>
    <meta name="description" content="AsiaTravelPlan booking detail" />
    <link rel="icon" href="assets/img/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="assets/css/styles.css?v=3" />
  </head>
  <body class="booking-detail-page">
    <header class="header" id="top">
      <div class="container header-wrap">
        <a class="brand" id="backendHomeLink" href="backend.html" aria-label="AsiaTravelPlan backend home">
          <img class="brand-logo" src="assets/img/logo-asiatravelplan.svg" alt="AsiaTravelPlan" width="320" height="76" />
        </a>

        <nav class="nav" aria-label="Backend navigation">
          <ul class="nav-list">
            <li><a id="backToBackend" href="backend.html">Backend</a></li>
            <li><a href="index.html">Website</a></li>
            <li><a id="backendLogoutLink" href="#">Logout</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main id="main-content">
      <section class="section">
        <div class="container">
          <h1 class="section-title" id="detailTitle">Booking</h1>
          <p class="section-booking" id="detailSubTitle">Loading...</p>

          <div id="detailError" class="backend-message" role="alert" aria-live="assertive"></div>

          <article id="bookingActionsPanel" style="margin-bottom: 1rem;">
            <div class="backend-controls">
              <div class="field">
                <label for="bookingOwnerSelect">Assigned to:</label>
                <select id="bookingOwnerSelect"></select>
              </div>

              <div class="field">
                <label for="bookingStageSelect">Stage</label>
                <select id="bookingStageSelect"></select>
              </div>
            </div>

            <div class="field">
              <label for="bookingNoteInput">Booking Note (Call notes, qualification details, customer preferences...)</label>
              <textarea id="bookingNoteInput" rows="4" placeholder="Write the current booking note..."></textarea>
            </div>
            <div class="backend-controls">
              <button class="btn btn-primary" id="bookingNoteSaveBtn" type="button">Save note</button>
              <span id="bookingActionStatus" class="micro"></span>
            </div>
          </article>

          <article id="pricingPanel" style="margin-bottom: 1rem;">
            <h2 class="section-title" style="font-size: 1.05rem;">Payments</h2>

            <div class="backend-table-wrap" style="margin-bottom: 1rem;">
              <table class="backend-table" id="pricingSummaryTable"></table>
            </div>

            <div class="backend-controls">
              <div class="field">
                <label for="pricingCurrencyInput">Currency</label>
                <input id="pricingCurrencyInput" type="text" maxlength="8" placeholder="USD" />
              </div>
              <div class="field">
                <label for="pricingAgreedNetInput">Agreed Net Amount (cents)</label>
                <input id="pricingAgreedNetInput" type="number" min="0" step="1" />
              </div>
            </div>

            <div class="backend-controls" style="align-items: center; margin-top: 0.6rem;">
              <h3 style="margin: 0; font-size: 0.98rem; flex: 1;">Adjustments</h3>
              <button class="btn btn-ghost" id="pricingAddAdjustmentBtn" type="button">Add adjustment</button>
            </div>
            <div class="backend-table-wrap" style="margin-bottom: 1rem;">
              <table class="backend-table" id="pricingAdjustmentsTable"></table>
            </div>

            <div class="backend-controls" style="align-items: center; margin-top: 0.6rem;">
              <h3 style="margin: 0; font-size: 0.98rem; flex: 1;">Payment Schedule</h3>
              <button class="btn btn-ghost" id="pricingAddPaymentBtn" type="button">Add payment</button>
            </div>
            <div class="backend-table-wrap" style="margin-bottom: 1rem;">
              <table class="backend-table" id="pricingPaymentsTable"></table>
            </div>

            <div class="backend-controls">
              <button class="btn btn-primary" id="pricingSaveBtn" type="button">Save payments</button>
              <span id="pricingStatus" class="micro"></span>
            </div>
          </article>

          <article id="invoicePanel" style="margin-bottom: 1rem;">
            <h2 class="section-title" style="font-size: 1.05rem;">Invoices</h2>
            <div class="backend-controls">
              <div class="field">
                <label for="invoiceSelect">Invoice</label>
                <select id="invoiceSelect">
                  <option value="">New invoice</option>
                </select>
              </div>
            </div>

            <div class="backend-controls">
              <div class="field">
                <label for="invoiceNumberInput">Invoice Number</label>
                <input id="invoiceNumberInput" type="text" placeholder="Auto-generated if empty" />
              </div>
              <div class="field">
                <label for="invoiceCurrencyInput">Currency</label>
                <select id="invoiceCurrencyInput">
                  <option value="USD" selected>USD - US Dollar</option>
                  <option value="EUR">EUR - Euro</option>
                  <option value="GBP">GBP - British Pound</option>
                  <option value="THB">THB - Thai Baht</option>
                  <option value="VND">VND - Vietnamese Dong</option>
                  <option value="LAK">LAK - Lao Kip</option>
                  <option value="KHR">KHR - Cambodian Riel</option>
                </select>
              </div>
              <div class="field">
                <label for="invoiceIssueDateInput">Issue Date</label>
                <input id="invoiceIssueDateInput" type="date" />
                <button class="btn btn-ghost" id="invoiceIssueTodayBtn" type="button" style="width: fit-content; padding: 0.35rem 0.6rem;">today</button>
              </div>
              <div class="field">
                <label for="invoiceDueDateInput">Due Date</label>
                <input id="invoiceDueDateInput" type="date" />
                <button class="btn btn-ghost" id="invoiceDueMonthBtn" type="button" style="width: fit-content; padding: 0.35rem 0.6rem;">in one month</button>
              </div>
            </div>

            <div class="field">
              <label for="invoiceTitleInput">Title</label>
              <input id="invoiceTitleInput" type="text" placeholder="Invoice title" />
            </div>

            <div class="field">
              <label for="invoiceItemsInput">Items (one per line: Description | Quantity | Unit amount in cents)</label>
              <textarea id="invoiceItemsInput" rows="5" placeholder="Example: Custom Vietnam route | 2 | 245000"></textarea>
            </div>

            <div class="field">
              <label for="invoiceDueAmountInput">Due Amount (cents, optional)</label>
              <input id="invoiceDueAmountInput" type="number" min="1" step="1" />
            </div>
            <div class="field">
              <label for="invoiceVatInput">VAT (%)</label>
              <input id="invoiceVatInput" type="number" min="0" max="100" step="0.01" value="0" />
            </div>

            <div class="field">
              <label for="invoiceNotesInput">Invoice Note</label>
              <textarea id="invoiceNotesInput" rows="3"></textarea>
            </div>

            <div class="backend-controls">
              <button class="btn btn-primary" id="invoiceCreateBtn" type="button" style="padding:0.7rem 1.2rem; margin:0.25rem 0.35rem;">Create Invoice</button>
              <span id="invoiceStatus" class="micro"></span>
            </div>

            <div class="backend-table-wrap" style="margin-top:0.7rem;">
              <table class="backend-table" id="invoicesTable"></table>
            </div>
          </article>

          <article style="margin-bottom: 1rem;">
            <h2 class="section-title" style="font-size: 1.05rem;">Activities</h2>
            <div class="backend-table-wrap">
              <table class="backend-table" id="activitiesTable"></table>
            </div>
          </article>

          <article style="margin-bottom: 1rem;">
            <h2 class="section-title" style="font-size: 1.05rem;">Booking Data</h2>
            <div id="bookingDataView"></div>
          </article>
        </div>
      </section>
    </main>

    <script src="assets/js/backend-booking.js" defer></script>
  </body>
</html>
